<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>M31 - Outils informatiques | Cours - Sohaib LAFIFI</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.cdc477d6.css" as="style"><link rel="preload" href="/assets/js/app.e9a4f05a.js" as="script"><link rel="preload" href="/assets/js/2.53d31978.js" as="script"><link rel="preload" href="/assets/js/40.3e14e6e2.js" as="script"><link rel="prefetch" href="/assets/js/10.b00f197e.js"><link rel="prefetch" href="/assets/js/11.1d29fa58.js"><link rel="prefetch" href="/assets/js/12.476e2b54.js"><link rel="prefetch" href="/assets/js/13.ca54079a.js"><link rel="prefetch" href="/assets/js/14.74993fb0.js"><link rel="prefetch" href="/assets/js/15.f48671b0.js"><link rel="prefetch" href="/assets/js/16.6d263f7c.js"><link rel="prefetch" href="/assets/js/17.cc1d39d7.js"><link rel="prefetch" href="/assets/js/18.b56ee655.js"><link rel="prefetch" href="/assets/js/19.8d81cacd.js"><link rel="prefetch" href="/assets/js/20.5b3fbf53.js"><link rel="prefetch" href="/assets/js/21.96b66c58.js"><link rel="prefetch" href="/assets/js/22.28a368d3.js"><link rel="prefetch" href="/assets/js/23.c5aba24b.js"><link rel="prefetch" href="/assets/js/24.1c779419.js"><link rel="prefetch" href="/assets/js/25.eb14d024.js"><link rel="prefetch" href="/assets/js/26.c1d78b42.js"><link rel="prefetch" href="/assets/js/27.438d75a6.js"><link rel="prefetch" href="/assets/js/28.ccd8c4ab.js"><link rel="prefetch" href="/assets/js/29.cb406640.js"><link rel="prefetch" href="/assets/js/3.ba16c78c.js"><link rel="prefetch" href="/assets/js/30.7fa71e98.js"><link rel="prefetch" href="/assets/js/31.064da601.js"><link rel="prefetch" href="/assets/js/32.dd663240.js"><link rel="prefetch" href="/assets/js/33.284d1781.js"><link rel="prefetch" href="/assets/js/34.5a7bd63d.js"><link rel="prefetch" href="/assets/js/35.933d35de.js"><link rel="prefetch" href="/assets/js/36.3a398051.js"><link rel="prefetch" href="/assets/js/37.a2b75d45.js"><link rel="prefetch" href="/assets/js/38.f68fe24c.js"><link rel="prefetch" href="/assets/js/39.9d3b3469.js"><link rel="prefetch" href="/assets/js/4.8b130817.js"><link rel="prefetch" href="/assets/js/41.2aabc14e.js"><link rel="prefetch" href="/assets/js/42.2c285354.js"><link rel="prefetch" href="/assets/js/43.b8ce584f.js"><link rel="prefetch" href="/assets/js/44.88201ae5.js"><link rel="prefetch" href="/assets/js/45.0dabf09d.js"><link rel="prefetch" href="/assets/js/46.9da80039.js"><link rel="prefetch" href="/assets/js/47.560a0975.js"><link rel="prefetch" href="/assets/js/48.8f6c31ae.js"><link rel="prefetch" href="/assets/js/49.07baa437.js"><link rel="prefetch" href="/assets/js/5.18267f87.js"><link rel="prefetch" href="/assets/js/50.e5684287.js"><link rel="prefetch" href="/assets/js/51.02d3b9b0.js"><link rel="prefetch" href="/assets/js/52.d333510e.js"><link rel="prefetch" href="/assets/js/53.1706e1f4.js"><link rel="prefetch" href="/assets/js/54.027f1544.js"><link rel="prefetch" href="/assets/js/6.c59f320e.js"><link rel="prefetch" href="/assets/js/7.16699103.js"><link rel="prefetch" href="/assets/js/8.7e664057.js"><link rel="prefetch" href="/assets/js/9.7279b4c1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cdc477d6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cours - Sohaib LAFIFI</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Modules
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Modules
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Modules</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/M2102-2/" class="sidebar-heading clickable"><span>M2102-2 : Virtualisation</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/M2105/" class="sidebar-heading clickable"><span>M2105 : Web dynamique</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/M2207/" class="sidebar-heading clickable"><span>M2207 : Consolidation des bases de la programmation (19-20)</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/M3210C/" class="sidebar-heading clickable"><span>M3210C : Programmation avancée</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/M23/" class="sidebar-heading clickable"><span>M23 - Administration systèmes</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/M31/" class="sidebar-heading clickable router-link-active open"><span>M31 - Outils informatiques</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/M31/CM/" class="sidebar-heading clickable router-link-active open"><span>CM</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/M31/CM/CM1.html" class="active sidebar-link">CM1 scripts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/M31/CM/CM1.html#l-exécution" class="sidebar-link">L'exécution</a></li><li class="sidebar-sub-header"><a href="/M31/CM/CM1.html#les-variables" class="sidebar-link">Les variables</a></li><li class="sidebar-sub-header"><a href="/M31/CM/CM1.html#les-structures-de-contrôle" class="sidebar-link">Les structures de contrôle</a></li><li class="sidebar-sub-header"><a href="/M31/CM/CM1.html#la-commande-awk" class="sidebar-link">La commande AWK</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/M31/TD/" class="sidebar-heading clickable"><span>TD</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/M31/TP/" class="sidebar-heading clickable"><span>TP</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/M36/" class="sidebar-heading clickable"><span>M36 - Services mobiles</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="m31-cm1-scripts"><a href="#m31-cm1-scripts" class="header-anchor">#</a> M31 - CM1 scripts</h1> <p></p><div class="table-of-contents"><ul><li><a href="#l-exécution">L'exécution</a><ul><li><a href="#récupération-des-paramètres">Récupération des paramètres</a></li></ul></li><li><a href="#les-variables">Les variables</a><ul><li><a href="#variables-globales">Variables globales</a></li><li><a href="#variables-locales-homonymes">Variables locales homonymes</a></li></ul></li><li><a href="#les-structures-de-contrôle">Les structures de contrôle</a><ul><li><a href="#utilisation-des-divers-guillemets">Utilisation des divers guillemets</a></li><li><a href="#les-caractères-spéciaux">Les caractères spéciaux</a></li><li><a href="#les-expressions">les expressions</a></li><li><a href="#la-commande-test">La commande `test``</a></li><li><a href="#l-instruction-conditionnelle">L'instruction conditionnelle</a></li><li><a href="#les-instructions-itératives-while">Les instructions itératives  : WHILE</a></li><li><a href="#les-instructions-itératives-until">Les instructions itératives : UNTIL</a></li><li><a href="#les-instructions-itératives-for">Les instructions itératives : FOR</a></li><li><a href="#les-instructions-itératives-case">Les instructions itératives : CASE</a></li></ul></li><li><a href="#la-commande-awk">La commande AWK</a><ul><li><a href="#présentation">présentation</a></li><li><a href="#syntaxe">syntaxe</a></li><li><a href="#principe">principe</a></li></ul></li></ul></div><p></p> <h2 id="l-exécution"><a href="#l-exécution" class="header-anchor">#</a> L'exécution</h2> <ul><li>Enchaînement des commandes (<code>;</code>)</li></ul> <blockquote><p><code>cd / ; pwd ; ls –al</code></p></blockquote> <p>si une des commandes n’existe pas, l’exécution s’arrête.</p> <ul><li>Exécution en arrière plan (<code>&amp;</code>)</li></ul> <blockquote><p>```netscape &amp;````</p></blockquote> <p>l’utilisateur récupère l’interpréteur pour lancer d’autres commandes</p> <ul><li>Exécution conditionnelle <code>&amp;&amp;</code> ou <code>||</code></li></ul> <blockquote><p><code>cm1 &amp;&amp; cm2</code> cm2 est exécutée si l’exécution de cm1 a réussi</p></blockquote> <blockquote><p><code>cm1 || cm2</code>  cm2 est exécutée si l’exécution de cm1</p></blockquote> <h4 id="exécution-d-un-programme-shell"><a href="#exécution-d-un-programme-shell" class="header-anchor">#</a> Exécution d’un programme shell</h4> <table><thead><tr><th>Commande</th> <th>Conditions sur le fichier</th> <th>Effet</th></tr></thead> <tbody><tr><td><code>bash nom_fichier</code></td> <td>Fichier lisible</td> <td>Interprétation par un sous processus shell</td></tr> <tr><td><code>nom_fichier</code></td> <td>Fichier exécutable dont la première ligne commence par <code>#! ref_shell</code></td> <td>Interprétation par un sous processus ref_shell</td></tr> <tr><td><code>source nom_fichier</code></td> <td>Fichier lisible</td> <td>Interprétation dans le shell courant</td></tr> <tr><td><code>exec nom_fichier</code></td> <td>Fichier lisible et exécutable</td> <td>Recouvrement du csh courant par un csh interprétant le fichier</td></tr></tbody></table> <p>Un programme shell est un fichier contenant un ensemble de commandes unix. Cet ensemble est interprétable par le shell.</p> <p>Exemple :
<code>mon_script</code></p> <div class="language- extra-class"><pre class="language-text"><code>#! /bin/bash  -&gt;  interpréteur de commandes 
echo &quot;ceci est un script&quot; -&gt; instruction à exécuter 
</code></pre></div><p>Exemples d’exécution :</p> <ul><li><p>bash mon_script argument1 argument2 ....</p></li> <li><p>source mon_script argument1 argument2 ...</p></li> <li><p>mon_script argument1 argument2 ....</p></li></ul> <p>Dans le dernier cas le programme devra :</p> <ul><li><p>commencer par #! Référence d’un shell (ex. #! /bin/bash)</p></li> <li><p>posséder l’attribut d’exécution (x)</p></li></ul> <h3 id="récupération-des-paramètres"><a href="#récupération-des-paramètres" class="header-anchor">#</a> Récupération des paramètres</h3> <ul><li><p><code>$0</code> nom de la commande</p></li> <li><p><code>$n</code> le n-ième paramètre</p></li> <li><p><code>$#</code> le nombre de paramètres</p></li> <li><p><code>$*</code> la liste de tous les paramètres</p></li></ul> <p><em><strong>Quelques variables spéciales</strong></em></p> <ul><li><p><code>$$</code> le numéro du processus de la dernière commande</p></li> <li><p><code>$?</code> Statuts de la dernière commande</p></li></ul> <p><em><strong>Divers</strong></em></p> <ul><li><p><code>#</code> : commentaires</p></li> <li><p><code>(cmde)</code> : exécute la commande dans un sous-shell</p></li> <li><p><code>read a</code> : lecture d’une entrée pendant l’exécution</p></li> <li><p><code>exit num</code> : renvoie num comme status de la commande</p></li> <li><p><code>nom_fonc() {liste_commandes }</code> :  définition d’une fonction</p></li></ul> <h2 id="les-variables"><a href="#les-variables" class="header-anchor">#</a> Les variables</h2> <p>Le bourne-shell distingue 2 types de variables :</p> <ul><li><p><em><strong>les variables locales</strong></em> : visibles uniquement par le processus qui les a créées. Les variables locales du processus père ne sont pas accessibles par le fils.</p></li> <li><p><em><strong>les variables globales</strong></em> : les variables du père sont accessibles et modifiables par le processus fils</p></li></ul> <blockquote><p>L’ensemble des variables globales est appelé environnement du processus</p></blockquote> <p>Par convention :</p> <ul><li><p>Les variables locales sont en minuscules</p></li> <li><p>Les variables globales sont en majuscules</p></li> <li><p>Nom de variable : chaîne de caractères</p></li></ul> <p>***Accès au contenu d’une variable ***(<code>$</code>)</p> <blockquote><p>Exemple : <code>echo $path</code></p></blockquote> <p><em><strong>Affectation d’une variable</strong></em> :</p> <blockquote><p><code>nomvar = valeur</code> -&gt; initialisation d’une variable</p></blockquote> <p><em><strong>Listing des variables déclarées</strong></em> :</p> <blockquote><p><code>set</code> -&gt; liste des variables</p></blockquote> <h3 id="variables-globales"><a href="#variables-globales" class="header-anchor">#</a> Variables globales</h3> <ul><li><p><code>HOME</code> : répertoire de connexion de l’utilisateur</p></li> <li><p><code>PATH</code> : liste des répertoires de recherche des commandes</p></li> <li><p><code>PWD</code> : répertoire courant</p></li> <li><p><code>TERM</code> : type de terminal utilisé</p></li> <li><p><code>SHELL</code> : nom du shell utilisé</p></li> <li><p><code>USER</code> : nom de l’utilisateur</p></li> <li><p><code>DISPLAY</code> : localisation de l’affichage</p></li></ul> <h3 id="variables-locales-homonymes"><a href="#variables-locales-homonymes" class="header-anchor">#</a> Variables locales homonymes</h3> <ul><li><p><code>status</code> : code de retour de la dernière commande</p></li> <li><p><code>prompt</code> : chaîne de caractères utilisée comme invite</p></li> <li><p><code>home</code> : répertoire de connexion de l’utilisateur</p></li> <li><p><code>path</code> : liste des répertoires de recherche des commandes</p></li> <li><p><code>term</code> : type de terminal utilisé</p></li> <li><p><code>shell</code> : nom du shell utilisé</p></li> <li><p><code>user</code> : nom de l’utilisateur</p></li></ul> <p>Toute modification d’une de ces variables entraîne la modification de la variable globale correspondante. Par contre l’inverse n’est pas vrai.</p> <h2 id="les-structures-de-contrôle"><a href="#les-structures-de-contrôle" class="header-anchor">#</a> Les structures de contrôle</h2> <p>Un shell est un interpréteur de langage de commandes. Il a 2 rôles :</p> <ul><li><p>Un rôle <em><strong>interactif</strong></em> : l’utilisateur peut exécuter directement des commandes</p></li> <li><p>Un rôle de <em><strong>langage de programmation</strong></em> : le shell exécute les commandes contenues dans un fichier</p></li></ul> <p>Sous unix, il existe plusieurs shells :</p> <ul><li><p>Le C-shell (csh) ou turbo C-shell (tcsh)</p></li> <li><p>Le Korn-shell (ksh)</p></li> <li><p>Le Bourne-shell (sh) ou le Bourne-Again-Shell (bash)</p></li></ul> <p>La liste des shells disponibles se trouve dans /etc/shells</p> <h3 id="utilisation-des-divers-guillemets"><a href="#utilisation-des-divers-guillemets" class="header-anchor">#</a> Utilisation des divers guillemets</h3> <ul><li><p><code>'</code> : une chaîne de caractères mise entre simple quotes ne sera pas interprétée par le shell</p></li> <li><p><code>&quot;</code> : seuls les métacaractères (<code>$</code>, <code>`</code> et <code>\</code>) sont interprétés, les autres seront pas interprétés.</p></li> <li><p><code>`</code> : un texte entre quotes inversés est considéré comme une commande à exécuter.</p></li></ul> <p><strong>Exemples :</strong></p> <div class="language- extra-class"><pre class="language-text"><code>echo 'ceci est une chaine de caractères non interprétée'
echo `pwd`
echo &quot;Le répertoire courant de l’utilisateur $user est `pwd`&quot;
</code></pre></div><h3 id="les-caractères-spéciaux"><a href="#les-caractères-spéciaux" class="header-anchor">#</a> Les caractères spéciaux</h3> <ul><li><p><code>\</code>          banalise le caractère suivant</p></li> <li><p><code>&quot;...&quot;</code>    banalise les caractères sauf , $, et `</p></li> <li><p><code>' ... '</code>  banalise tous les caractères</p></li> <li><p><code>`...`</code>   substitution de commande</p></li> <li><p><code>*</code>       n ’importe quelle chaîne de caractères</p></li> <li><p><code>?</code>      n ’importe quel caractère</p></li> <li><p><code>[...]</code>  n ’importe quel caractère décrit entre les crochets</p></li></ul> <p>Toute chaîne précédée du caractère <code>#</code> est un commentaire.</p> <h3 id="les-expressions"><a href="#les-expressions" class="header-anchor">#</a> les expressions</h3> <p>Syntaxe : expr expr oper1 op oper2</p> <ul><li><p><code>expr exp1 \| exp2</code>       exécute les opérations arithmétiques sur les opérandes oper1 et oper2 (+, -, *, /, %, =, &gt;, &gt;=, &lt;, &lt;=, !=)</p></li> <li><p><code>expr exp1 \&amp; exp2</code>       renvoie exp1 si l’expression est non nulle, exp2 sinon</p></li> <li><p><code>expr exp1 : exp2</code>        renvoie exp1 si exp1 et exp2 sont non nuls, 0 sinon</p></li> <li><p><code>expr length exp</code>         renvoie le nombre de caractères en commun dans les deux arguments</p></li> <li><p><code>expr substr exp n1 n2</code>   retourne le nombre de caractères de exp retourne la chaîne de caractères exp où les caractères n1 ont été remplacés par n2</p></li> <li><p><code>expr index exp car</code>      retourne la position du caractère car dans la chaîne exp</p></li></ul> <h3 id="la-commande-test"><a href="#la-commande-test" class="header-anchor">#</a> La commande ```test````</h3> <p>La commande permet de valider une condition</p> <p><strong>Syntaxe</strong></p> <p><code>test express</code> ou <code>[ express ]</code></p> <ul><li><p><code>-r fichier</code>   vrai si l’utilisateur a le droit de lecture sur fichier</p></li> <li><p><code>-w fichier</code>   vrai si l ’utilisateur a le droit d ’écriture sur fichier</p></li> <li><p><code>-x fichier</code>   vrai si l ’utilisateur a le droit d ’exécution sur fichier</p></li> <li><p><code>-e fichier</code>   vrai si fichier existe</p></li> <li><p><code>-f fichier</code>   vrai si fichier est un fichier régulier</p></li> <li><p><code>-d fichier</code>   vrai si fichier est un répertoire</p></li> <li><p><code>-s fichier</code>   vrai si la taille de fichier est non nulle</p></li> <li><p><code>-o fichier</code>   vrai si l’utilisateur est propriétaire du fichier</p></li> <li><p><code>s1 == s2</code> vrai si les deux expressions sont égales</p></li> <li><p><code>s1 != s2</code> vrai si les deux expressions sont différentes</p></li> <li><p><code>s1</code>  vrai si s1 n ’est pas la chaîne nulle</p></li> <li><p><code>e1 -eq e2</code>             vrai si les deux entiers e1 et e2 sont égaux (autres comparaisons: -ne, -gt, -ge, -lt, -le)</p></li> <li><p><code>!</code>                     Négation unaire</p></li> <li><p><code>-a</code>                    opération binaire ET</p></li> <li><p><code>-o</code>                    opération binaire OU</p></li></ul> <p><strong>Exemples :</strong></p> <blockquote><p><code>test $val -le 20 -a $val -ge 0</code> -&gt; la variable val est comprise entre 0 et 20</p></blockquote> <blockquote><p><code>test &quot;$chaine&quot; != &quot;&quot;</code> -&gt; la variable chaîne est différente de vide</p></blockquote> <div class="custom-block danger"><p class="custom-block-title">Remarque</p> <p>le caractère espace est nécessaire avant et après un des opérateurs ci-dessus</p></div> <h3 id="l-instruction-conditionnelle"><a href="#l-instruction-conditionnelle" class="header-anchor">#</a> L'instruction conditionnelle</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> condition 
<span class="token keyword">then</span>
instructions
<span class="token keyword">else</span> 
instructions
<span class="token keyword">fi</span>
</code></pre></div><p>ou</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> condition 
<span class="token keyword">then</span> 
instructions
<span class="token keyword">fi</span>
</code></pre></div><p><em><strong>Exemple :</strong></em></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token function">find</span> / -name main*.c
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;fonction main trouvée&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;fonction main non trouvée&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p><strong>Autre façon</strong> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> expression <span class="token punctuation">]</span> 
<span class="token keyword">then</span>
instructions
<span class="token keyword">else</span> 
instructions
<span class="token keyword">fi</span>
</code></pre></div><p>ou</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> expression <span class="token punctuation">]</span> 
<span class="token keyword">then</span> 
instructions
<span class="token keyword">fi</span>
</code></pre></div><p><em><strong>Exemple :</strong></em></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> -lt <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span> plus petit que 5 &quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span>  <span class="token string">&quot;<span class="token variable">$1</span> plus grand que 5&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><p><strong>If en cascade :</strong></p> <p>un seul fi sur la totalité de la structure.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> condition
<span class="token keyword">then</span>
instructions
<span class="token keyword">elif</span> condition 
<span class="token keyword">then</span>
instructions 
<span class="token punctuation">..</span>.
<span class="token keyword">else</span> 
instructions
<span class="token keyword">fi</span>
</code></pre></div><h3 id="les-instructions-itératives-while"><a href="#les-instructions-itératives-while" class="header-anchor">#</a> Les instructions itératives  : WHILE</h3> <p><strong>Syntaxe :</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token punctuation">[</span> expression <span class="token punctuation">]</span> 
<span class="token keyword">do</span>
    instructions
<span class="token keyword">done</span>
</code></pre></div><p><strong>Exemple</strong> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> -lt <span class="token number">10</span> <span class="token punctuation">]</span> 
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$n</span>
    <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $n + <span class="token number">1</span><span class="token variable">`</span></span> 
<span class="token keyword">done</span>
</code></pre></div><ul><li><p>Les instructions sont exécutées tant que la condition est vraie.</p></li> <li><p><strong>Remarque</strong> : une expression de valeur nulle est considérée comme fausse, tout autre valeur est considérée comme vraie</p></li></ul> <h3 id="les-instructions-itératives-until"><a href="#les-instructions-itératives-until" class="header-anchor">#</a> Les instructions itératives : UNTIL</h3> <p><strong>Syntaxe</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">until</span> <span class="token punctuation">[</span> expression <span class="token punctuation">]</span> 
<span class="token keyword">do</span>
    instructions
<span class="token keyword">done</span>
</code></pre></div><p><strong>Exemple</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> -gt <span class="token number">10</span> <span class="token punctuation">]</span> 
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$n</span> 
    <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $n + <span class="token number">1</span><span class="token variable">`</span></span>
<span class="token keyword">done</span>
</code></pre></div><h3 id="les-instructions-itératives-for"><a href="#les-instructions-itératives-for" class="header-anchor">#</a> Les instructions itératives : FOR</h3> <p><strong>Syntaxe</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> liste 
<span class="token keyword">do</span>
    instructions
<span class="token keyword">done</span>
</code></pre></div><p><strong>Exemple</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span> 
<span class="token keyword">do</span>
    <span class="token function">cp</span> <span class="token variable">$i</span> /dir/<span class="token variable">$i</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$i</span> copie&quot;</span>
<span class="token keyword">done</span>
</code></pre></div><ul><li><p>La variable para prend successivement les valeurs de la liste</p></li> <li><p>Si la liste est omise, param prend alors les valeurs passées en paramètres</p></li></ul> <h3 id="les-instructions-itératives-case"><a href="#les-instructions-itératives-case" class="header-anchor">#</a> Les instructions itératives : CASE</h3> <p><strong>Syntaxe</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">case</span> para <span class="token keyword">in</span>
    choix1 <span class="token punctuation">)</span> instructions <span class="token punctuation">;</span><span class="token punctuation">;</span>
    choix2 <span class="token operator">|</span> choix3 <span class="token punctuation">)</span> instructions <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><p><strong>Exemple</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
 -d <span class="token punctuation">)</span> <span class="token function">rmdir</span> <span class="token variable">$dir</span><span class="token punctuation">;</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
 -o <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;option -o&quot;</span><span class="token punctuation">;</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
 * <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;reponse incorrecte &quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>

</code></pre></div><h2 id="la-commande-awk"><a href="#la-commande-awk" class="header-anchor">#</a> La commande AWK</h2> <h3 id="présentation"><a href="#présentation" class="header-anchor">#</a> présentation</h3> <p><code>awk</code> (Aho, Weinberger et Kernighan) est une commande très puissante, c'est un langage de programmation qui permet l’écriture des filtres.</p> <p>Elle permet :</p> <ul><li><p>une recherche de chaînes et l'exécution d'actions sur les lignes sélectionnées.</p></li> <li><p>de récupérer de l'information, générer des rapports, transformer des données.</p></li></ul> <p>Une grande partie de la syntaxe a été empruntée au langage c, d'ailleurs awk sont les abréviations de ces 3 créateurs dont k pour Kernighan, un des inventeurs du C.</p> <h3 id="syntaxe"><a href="#syntaxe" class="header-anchor">#</a> syntaxe</h3> <p><code>awk [-F] [-v var=valeur] 'programme' fichier</code></p> <p>ou
<code>awk [-F] [-v var=valeur] -f fichier-config fichier</code></p> <p><strong>Les arguments :</strong></p> <ul><li><p><code>-F</code> doit être suivi du séparateur de champ (<code>-F:</code> pour un &quot;:&quot; comme séparateur de champ).</p></li> <li><p><code>-f</code> suivi du nom du fichier de configuration de awk.</p></li> <li><p><code>-v</code> définit une variable (var dans l'exemple) qui sera utilisée par la suite dans le programme.</p></li></ul> <p>Un programme awk possède la structure suivante: critère de sélection d'une chaîne {action}, quand il n'y a pas de critère c'est que l'action s'applique à toutes les lignes du fichier.</p> <h3 id="principe"><a href="#principe" class="header-anchor">#</a> principe</h3> <p>Un <strong>enregistrement</strong> est une chaîne de caractères séparée par un retour chariot.</p> <p>Un <strong>champs</strong> est une chaîne de caractères séparée par un espace (ou par le caractère spécifié par l'option -F)</p> <p>La variable <strong>NF</strong> contient le nombre de champs de l'enregistrement courant. On accède à chaque champs par la variable $1, $2, ... $NF. $0 correspond à l'enregistrement complet.</p> <div class="language- extra-class"><pre class="language-text"><code>~&gt; cat /tmp/passwd

kmouhri:x:1410:130:Karim:Mouhri:/user1/info1/groupe2/kmouhri:/bin/tcsh 
djiar:x:1411:130:Hanane:DJIAR:/user1/info1/groupe3/djiar:/bin/tcsh 
slhomme:x:1412:130:Sylvain:LHOMME:/user1/info1/groupe1/slhomme:/bin/tcsh

~&gt; awk -F &quot;:&quot; '{ print $5,$6 }' /tmp/passwd 

Karim Mouhri
Hanane DJIAR
Sylvain LHOMME
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Dernière modification :</span> <span class="time">26-04-2021</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/M23/TP/TP3.html" class="prev">
        TP3 Services Réseaux
      </a></span> <span class="next"><a href="/M31/TD/TD1.html">
        TD1 commande awk
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e9a4f05a.js" defer></script><script src="/assets/js/2.53d31978.js" defer></script><script src="/assets/js/40.3e14e6e2.js" defer></script>
  </body>
</html>
